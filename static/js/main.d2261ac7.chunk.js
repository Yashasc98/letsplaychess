(this.webpackJsonpletsplaychess=this.webpackJsonpletsplaychess||[]).push([[0],{18:function(t,e,s){},19:function(t,e,s){},20:function(t,e,s){},22:function(t,e,s){},23:function(t,e,s){"use strict";s.r(e);var i=s(0),n=s.n(i),a=s(12),o=s.n(a),r=(s(18),function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,24)).then((function(e){var s=e.getCLS,i=e.getFID,n=e.getFCP,a=e.getLCP,o=e.getTTFB;s(t),i(t),n(t),a(t),o(t)}))}),d=s(13),l=s(2),c=s(5),h=s(6),p=s(4),g=s(8),u=s(7),b=(s(19),s(20),["a","b","c","d","e","f","g","h"]),m=["8","7","6","5","4","3","2","1"],f={"00":"rook_b.png",10:"knight_b.png",20:"bishop_b.png",30:"queen_b.png",40:"king_b.png",50:"bishop_b.png",60:"knight_b.png",70:"rook_b.png","01":"pawn_b.png",11:"pawn_b.png",21:"pawn_b.png",31:"pawn_b.png",41:"pawn_b.png",51:"pawn_b.png",61:"pawn_b.png",71:"pawn_b.png","07":"rook_w.png",17:"knight_w.png",27:"bishop_w.png",37:"queen_w.png",47:"king_w.png",57:"bishop_w.png",67:"knight_w.png",77:"rook_w.png","06":"pawn_w.png",16:"pawn_w.png",26:"pawn_w.png",36:"pawn_w.png",46:"pawn_w.png",56:"pawn_w.png",66:"pawn_w.png",76:"pawn_w.png"},v=s(1),I=function(t){Object(g.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(c.a)(this,s),(i=e.call(this,t)).state={},i}return Object(h.a)(s,[{key:"render",value:function(){return void 0!==f["".concat(this.props.xAxis).concat(this.props.yAxis)]?(this.props.xAxis+this.props.yAxis)%2===0?Object(v.jsx)("div",{id:"".concat(1+this.props.xAxis).concat(8-this.props.yAxis),className:"tile light-tile",children:Object(v.jsx)("div",{className:"piece",style:{backgroundImage:"url('".concat("/letsplaychess","/assets/pieces/").concat(f["".concat(this.props.xAxis).concat(this.props.yAxis)],"')")}})}):Object(v.jsx)("div",{id:"".concat(1+this.props.xAxis).concat(8-this.props.yAxis),className:"tile dark-tile",children:Object(v.jsx)("div",{className:"piece",style:{backgroundImage:"url('".concat("/letsplaychess","/assets/pieces/").concat(f["".concat(this.props.xAxis).concat(this.props.yAxis)],"')")}})}):(this.props.xAxis+this.props.yAxis)%2===0?Object(v.jsx)("div",{id:"".concat(1+this.props.xAxis).concat(8-this.props.yAxis),className:"tile light-tile"}):Object(v.jsx)("div",{id:"".concat(1+this.props.xAxis).concat(8-this.props.yAxis),className:"tile dark-tile"})}}]),s}(n.a.Component),C=function(t){Object(g.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(c.a)(this,s),(i=e.call(this,t)).state={grabbedPiece:null,chessboardLeft:null,chessboardRight:null,chessBoardTop:null,chessBoardBottom:null,validSquares:null,isMobile:null,colourToMove:"w"},i.grabPiece=i.grabPiece.bind(Object(p.a)(i)),i.movePiece=i.movePiece.bind(Object(p.a)(i)),i.dropPiece=i.dropPiece.bind(Object(p.a)(i)),i.handleRightClick=i.handleRightClick.bind(Object(p.a)(i)),i}return Object(h.a)(s,[{key:"componentDidMount",value:function(){this.setState({chessboardLeft:document.getElementById("chessboard").getBoundingClientRect().left+window.pageXOffset,chessboardRight:document.getElementById("chessboard").getBoundingClientRect().right+window.pageXOffset,chessBoardTop:document.getElementById("chessboard").getBoundingClientRect().top+window.pageYOffset,chessBoardBottom:document.getElementById("chessboard").getBoundingClientRect().bottom+window.pageYOffset,isMobile:window.innerWidth<=768})}},{key:"grabPiece",value:function(t){if(2!==t.button&&t.target.classList.contains("piece")){if(this.state.isMobile&&"onTouchStart"===t._reactName&&document.body.classList.add("disableScroll"),this.getPieceTypeAndColour(t.target)[1]!==this.state.colourToMove)return;var e=(this.state.isMobile&&"onTouchStart"===t._reactName?t.touches[0].clientX:t.clientX)+(-t.target.clientWidth/2+window.pageXOffset),s=(this.state.isMobile&&"onTouchStart"===t._reactName?t.touches[0].clientY:t.clientY)+(-t.target.clientHeight/2+window.pageYOffset);t.target.classList.add("movingPiece"),t.target.style.left="".concat(e,"px"),t.target.style.top="".concat(s,"px"),this.getAllValidSquaresForPiece(this.getPieceTypeAndColour(t.target)[0],t.target.parentNode.id,this.getPieceTypeAndColour(t.target)[1]),this.setState({grabbedPiece:t})}}},{key:"getAllValidSquaresForPiece",value:function(t,e,s){var i=[];if("pawn"===t&&(e=parseInt(e),"b"===s?(this.isThisIdValidOnChessBoard(e-1,s)&&!document.getElementById(e-1).firstChild&&i.push((e-1).toString()),this.isThisIdValidOnChessBoard(e-11,s)&&document.getElementById(e-11).firstChild&&i.push((e-11).toString()),this.isThisIdValidOnChessBoard(e+9,s)&&document.getElementById(e+9).firstChild&&i.push((e+9).toString()),e%10===7&&this.isThisIdValidOnChessBoard(e-2,s)&&i.push((e-2).toString())):"w"===s&&(this.isThisIdValidOnChessBoard(e+1,s)&&!document.getElementById(e+1).firstChild&&i.push((e+1).toString()),this.isThisIdValidOnChessBoard(e+11,s)&&document.getElementById(e+11).firstChild&&i.push((e+11).toString()),this.isThisIdValidOnChessBoard(e-9,s)&&document.getElementById(e-9).firstChild&&i.push((e-9).toString()),e%10===2&&this.isThisIdValidOnChessBoard(e+2,s)&&i.push((e+2).toString()))),"knight"===t){var n=parseInt(e);this.isThisIdValidOnChessBoard(n+12,s)&&i.push((n+12).toString()),this.isThisIdValidOnChessBoard(n-12,s)&&i.push((n-12).toString()),this.isThisIdValidOnChessBoard(n+8,s)&&i.push((n+8).toString()),this.isThisIdValidOnChessBoard(n-8,s)&&i.push((n-8).toString()),this.isThisIdValidOnChessBoard(n+21,s)&&i.push((n+21).toString()),this.isThisIdValidOnChessBoard(n-21,s)&&i.push((n-21).toString()),this.isThisIdValidOnChessBoard(n+19,s)&&i.push((n+19).toString()),this.isThisIdValidOnChessBoard(n-19,s)&&i.push((n-19).toString())}if("bishop"===t){for(var a=parseInt(e);this.isThisIdValidOnChessBoard(a+11,s)&&(i.push((a+11).toString()),!document.getElementById((a+11).toString()).firstChild);)a+=11;for(a=parseInt(e);this.isThisIdValidOnChessBoard(a-11,s)&&(i.push((a-11).toString()),!document.getElementById((a-11).toString()).firstChild);)a-=11;for(a=parseInt(e);this.isThisIdValidOnChessBoard(a-9,s)&&(i.push((a-9).toString()),!document.getElementById((a-9).toString()).firstChild);)a-=9;for(a=parseInt(e);this.isThisIdValidOnChessBoard(a+9,s)&&(i.push((a+9).toString()),!document.getElementById((a+9).toString()).firstChild);)a+=9}if("rook"===t){for(var o=parseInt(e);this.isThisIdValidOnChessBoard(o+1,s)&&(i.push((o+1).toString()),!document.getElementById((o+1).toString()).firstChild);)o+=1;for(o=parseInt(e);this.isThisIdValidOnChessBoard(o-1,s)&&(i.push((o-1).toString()),!document.getElementById((o-1).toString()).firstChild);)o-=1;for(o=parseInt(e);this.isThisIdValidOnChessBoard(o+10,s)&&(i.push((o+10).toString()),!document.getElementById((o+10).toString()).firstChild);)o+=10;for(o=parseInt(e);this.isThisIdValidOnChessBoard(o-10,s)&&(i.push((o-10).toString()),!document.getElementById((o-10).toString()).firstChild);)o-=10}if("queen"===t){for(var r=parseInt(e);this.isThisIdValidOnChessBoard(r+1,s)&&(i.push((r+1).toString()),!document.getElementById((r+1).toString()).firstChild);)r+=1;for(r=parseInt(e);this.isThisIdValidOnChessBoard(r-1,s)&&(i.push((r-1).toString()),!document.getElementById((r-1).toString()).firstChild);)r-=1;for(r=parseInt(e);this.isThisIdValidOnChessBoard(r+10,s)&&(i.push((r+10).toString()),!document.getElementById((r+10).toString()).firstChild);)r+=10;for(r=parseInt(e);this.isThisIdValidOnChessBoard(r-10,s)&&(i.push((r-10).toString()),!document.getElementById((r-10).toString()).firstChild);)r-=10;for(r=parseInt(e);this.isThisIdValidOnChessBoard(r+11,s)&&(i.push((r+11).toString()),!document.getElementById((r+11).toString()).firstChild);)r+=11;for(r=parseInt(e);this.isThisIdValidOnChessBoard(r-11,s)&&(i.push((r-11).toString()),!document.getElementById((r-11).toString()).firstChild);)r-=11;for(r=parseInt(e);this.isThisIdValidOnChessBoard(r-9,s)&&(i.push((r-9).toString()),!document.getElementById((r-9).toString()).firstChild);)r-=9;for(r=parseInt(e);this.isThisIdValidOnChessBoard(r+9,s)&&(i.push((r+9).toString()),!document.getElementById((r+9).toString()).firstChild);)r+=9}if("king"===t){var d=parseInt(e);this.isThisIdValidOnChessBoard(d+1,s)&&i.push((d+1).toString()),this.isThisIdValidOnChessBoard(d-1,s)&&i.push((d-1).toString()),this.isThisIdValidOnChessBoard(d+10,s)&&i.push((d+10).toString()),this.isThisIdValidOnChessBoard(d-10,s)&&i.push((d-10).toString()),this.isThisIdValidOnChessBoard(d+11,s)&&i.push((d+11).toString()),this.isThisIdValidOnChessBoard(d-11,s)&&i.push((d-11).toString()),this.isThisIdValidOnChessBoard(d+9,s)&&i.push((d+9).toString()),this.isThisIdValidOnChessBoard(d-9,s)&&i.push((d-9).toString())}return this.styleToValidSquares(i,1),this.setState({validSquares:i}),0}},{key:"styleToValidSquares",value:function(t,e){if(e)for(var s=0;s<t.length;s++)document.getElementById(t[s]).firstChild?document.getElementById(t[s]).firstChild.classList.add("validSquare"):document.getElementById(t[s]).classList.add("validSquare");else for(var i=0;i<this.state.validSquares.length;i++)document.getElementById(this.state.validSquares[i]).firstChild?document.getElementById(this.state.validSquares[i]).firstChild.classList.remove("validSquare"):document.getElementById(this.state.validSquares[i]).classList.remove("validSquare")}},{key:"isThisIdValidOnChessBoard",value:function(t,e){if(t<11||t>88)return!1;var s=t%10,i=(t-s)/10;return s>=1&&s<=8&&i>=1&&i<=8&&(!document.getElementById(t).firstChild||!document.getElementById(t).firstChild.classList.contains("piece")||e!==this.getPieceTypeAndColour(document.getElementById(t).firstChild)[1])}},{key:"movePiece",value:function(t){if(this.state.grabbedPiece){var e=this.state.isMobile&&"onTouchMove"===t._reactName?t.touches[0].clientX:t.clientX,s=this.state.isMobile&&"onTouchMove"===t._reactName?t.touches[0].clientY:t.clientY,i=this.state.grabbedPiece;this.validatePieceInsideChessboard(t,e,s,window.pageXOffset,window.pageYOffset,t.target.clientWidth/4,t.target.clientHeight/4)&&(i.target.style.left="".concat(e-t.target.clientWidth/2+window.pageXOffset,"px"),i.target.style.top="".concat(s-t.target.clientHeight/2+window.pageYOffset,"px"))}}},{key:"validatePieceInsideChessboard",value:function(t,e,s,i,n,a,o){return this.state.chessboardLeft+a<=e+i&&this.state.chessboardRight-a>=e+i&&this.state.chessBoardTop+o<=s+n&&this.state.chessBoardBottom-o>=s+n}},{key:"dropPiece",value:function(t){if(this.state.grabbedPiece){this.state.isMobile&&"onTouchEnd"===t._reactName&&document.body.classList.remove("disableScroll"),this.styleToValidSquares(null,null);var e=this.state.grabbedPiece;e.target.classList.remove("movingPiece");var s=this.state.isMobile&&"onTouchEnd"===t._reactName?document.elementFromPoint(t.changedTouches[0].clientX,t.changedTouches[0].clientY):document.elementFromPoint(t.clientX,t.clientY),i=!1;s.classList.contains("piece")&&(i=!0,s=s.parentNode);var n=!1;this.validDropSquare(s,e)?i?(s.removeChild(s.firstChild),s.appendChild(e.target)):(t.target.parentNode.removeChild(t.target),s.appendChild(e.target)):n=!0,console.log(e.target.parentNode.id),console.log(s.id),this.setState({grabbedPiece:null,validSquares:null}),n||this.setState({colourToMove:"w"===this.state.colourToMove?"b":"w"})}}},{key:"validDropSquare",value:function(t,e){return!!t.classList.contains("tile")&&!!this.state.validSquares.includes(t.id)}},{key:"handleRightClick",value:function(t){t.preventDefault(),t.target.classList.contains("piece")&&(t.target.classList.contains("selected")?t.target.classList.remove("selected"):t.target.classList.add("selected"))}},{key:"getPieceTypeAndColour",value:function(t){return t.style.backgroundImage.split(".")[0].split("/").pop().split("_")}},{key:"render",value:function(){for(var t=[],e=0;e<m.length;e++)for(var s=0;s<b.length;s++)t.push(Object(v.jsx)(I,{xAxis:s,yAxis:e},"".concat(s,",").concat(e)));return Object(v.jsx)("div",{onMouseUp:this.dropPiece,id:"chessboard-center",children:Object(v.jsx)("div",{onMouseDown:this.grabPiece,onTouchStart:this.grabPiece,onMouseMove:this.movePiece,onTouchMove:this.movePiece,onTouchEnd:this.dropPiece,onContextMenu:this.handleRightClick,id:"chessboard",children:t})})}}]),s}(n.a.Component),O=(s(22),function(t){Object(g.a)(s,t);var e=Object(u.a)(s);function s(){return Object(c.a)(this,s),e.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark navbar-custom",children:[Object(v.jsx)("a",{href:"/",children:Object(v.jsx)("img",{className:"logo-custom",src:"/letsplaychess/assets/pieces/knight_b.png",alt:"knight black"})}),Object(v.jsx)("a",{className:"nav-link navbar-brand-custom",href:"/letsplaychess",children:"LetsPlayChess"}),Object(v.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(v.jsx)("span",{className:"navbar-toggler-icon"})}),Object(v.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(v.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(v.jsxs)("li",{className:"nav-item dropdown",children:[Object(v.jsx)("a",{className:"nav-link dropdown-toggle",href:".",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Username"}),Object(v.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:[Object(v.jsx)("a",{className:"dropdown-item",href:"/letsplaychess",children:"Profile"}),Object(v.jsx)("div",{className:"dropdown-divider"}),Object(v.jsx)("a",{className:"dropdown-item",href:"/letsplaychess",children:"Settings"}),Object(v.jsx)("div",{className:"dropdown-divider"}),Object(v.jsx)("a",{className:"dropdown-item",href:"/letsplaychess",children:"Logout"})]})]}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{className:"nav-link",href:"/letsplaychess/play",children:"Play!"})})]})})]})})}}]),s}(i.Component)),y=O;o.a.render(Object(v.jsxs)(d.a,{children:[Object(v.jsx)(y,{}),Object(v.jsx)(C,{}),Object(v.jsx)(l.c,{children:Object(v.jsx)(l.a,{path:"letsplaychess/play",element:Object(v.jsx)(C,{})})})]}),document.getElementById("root")),r()}},[[23,1,2]]]);
//# sourceMappingURL=main.d2261ac7.chunk.js.map